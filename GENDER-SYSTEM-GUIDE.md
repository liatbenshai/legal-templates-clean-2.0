# מדריך: מערכת התאמת מגדר אוטומטית במסמכים משפטיים

## סקירה כללית

המערכת מאפשרת התאמה אוטומטית של טקסטים משפטיים למגדר הנכון (זכר/נקבה/רבים) בכל המסמכים.

זה חשוב במיוחד במסמכים משפטיים כמו:
- הנחיות מקדימות (מיופה כוח)
- צוואות (יורשים)
- מינוי אפוטרופוסים
- העברת עסקים

---

## איך זה עובד?

### 1. **מילון עברית מתקדם** (`lib/hebrew-gender.ts`)

המערכת כוללת מילון מקיף של מילים ונטיות בעברית:

```typescript
'מיופה_הכוח': { 
  male: 'מיופה הכוח', 
  female: 'מיופת הכוח', 
  plural: 'מיופי הכוח' 
}

'רשאי': { 
  male: 'רשאי', 
  female: 'רשאית', 
  plural: 'רשאים' 
}
```

המילון כולל:
- פעלים (עשה → עשתה, אמר → אמרה)
- תארים (טוב → טובה, גדול → גדולה)
- מונחים משפטיים (מיופה כוח, אפוטרופוס, יורש)
- יחסי משפחה (בן → בת, אח → אחות)
- מצבים משפטיים (זכאי → זכאית, אחראי → אחראית)

### 2. **הפונקציה המרכזית: `applyGenderToText`**

```typescript
import { applyGenderToText } from '@/lib/hebrew-gender';

const text = "מיופה_הכוח רשאי למכור את הנכס";

// זכר
applyGenderToText(text, 'male');
// תוצאה: "מיופה הכוח רשאי למכור את הנכס"

// נקבה
applyGenderToText(text, 'female');
// תוצאה: "מיופת הכוח רשאית למכור את הנכס"
```

---

## שימוש במערכת

### בהנחיות מקדימות

#### 1. **במחסן הסעיפים**
כתיבת הטקסט במחסן עם קו תחתון:

```typescript
content: `מיופה_הכוח רשאי למכור את הנכס במקרים הבאים:
- צורך כספי דחוף
- מעבר למוסד סיעודי

מיופה_הכוח מוסמך לנהל את העסקה.`
```

**חשוב**: השתמש ב-`מיופה_הכוח` (עם קו תחתון) כדי שהמערכת תזהה את המילה.

#### 2. **ברכיב המחסן**
העברת המגדר:

```typescript
<AdvanceDirectivesWarehouse
  onAddSection={(content, title) => {
    setCustomSections([...customSections, { title, content }]);
  }}
  attorneyGender={attorneys[0]?.gender || 'male'}
/>
```

#### 3. **בטופס**
בחירת מגדר:

```tsx
<select
  value={attorney.gender}
  onChange={(e) => {
    const newAttorneys = [...attorneys];
    newAttorneys[index].gender = e.target.value as 'male' | 'female';
    setAttorneys(newAttorneys);
  }}
>
  <option value="male">זכר</option>
  <option value="female">נקבה</option>
</select>
```

---

### בצוואות

בצוואות יש צורך במגדור מרובה (מצווה + יורשים):

```typescript
// מגדר המצווה
const testatorGender: 'male' | 'female' = formData.gender;

// טקסט עם מגדור
const text = "המצווה הצהיר כי בנו יירש את הנכס";

// החלת מגדר
applyGenderToText(text, testatorGender);
// אם נקבה: "המצווה הצהירה כי בתה תירש את הנכס"
```

---

## הוספת מילים חדשות למילון

אם נדרשת מילה שלא במילון:

```typescript
import { addCustomWord } from '@/lib/hebrew-gender';

addCustomWord('מנכ"ל', {
  male: 'מנכ"ל',
  female: 'מנכ"לית',
  plural: 'מנכ"לים'
});
```

---

## מילים נפוצות במילון

### תפקידים משפטיים
| מילה | זכר | נקבה | רבים |
|------|-----|------|------|
| מיופה_הכוח | מיופה הכוח | מיופת הכוח | מיופי הכוח |
| אפוטרופוס | אפוטרופוס | אפוטרופסת | אפוטרופסים |
| מטפל | מטפל | מטפלת | מטפלים |
| היורש | היורש | היורשת | היורשים |

### מצבים משפטיים
| מילה | זכר | נקבה | רבים |
|------|-----|------|------|
| רשאי | רשאי | רשאית | רשאים |
| אחראי | אחראי | אחראית | אחראים |
| מוסמך | מוסמך | מוסמכת | מוסמכים |
| זכאי | זכאי | זכאית | זכאים |

### יחסי משפחה
| מילה | זכר | נקבה | רבים |
|------|-----|------|------|
| בן | בן | בת | ילדים |
| בנו | בנו | בתו | ילדיו |
| אח | אח | אחות | אחים |
| אחיו | אחיו | אחותו | אחיו |

---

## דוגמאות שימוש מלאות

### דוגמה 1: הנחיות מקדימות - זכר

**קלט:**
```
מיופה_הכוח רשאי למכור את הנכס.
מיופה_הכוח אחראי על תחזוקת הנכס.
מיופה_הכוח מוסמך לנהל את חשבונות הבנק.
```

**פלט (זכר):**
```
מיופה הכוח רשאי למכור את הנכס.
מיופה הכוח אחראי על תחזוקת הנכס.
מיופה הכוח מוסמך לנהל את חשבונות הבנק.
```

**פלט (נקבה):**
```
מיופת הכוח רשאית למכור את הנכס.
מיופת הכוח אחראית על תחזוקת הנכס.
מיופת הכוח מוסמכת לנהל את חשבונות הבנק.
```

### דוגמה 2: צוואה - נקבה

**קלט:**
```
המצווה הצהיר כי בנו יירש את הנכס.
המצווה מינה אפוטרופוס לילדיו.
```

**פלט (נקבה):**
```
המצווה הצהירה כי בתה תירש את הנכס.
המצווה מינתה אפוטרופסת לילדיה.
```

---

## איך לבדוק אם זה עובד?

### 1. בדיקה בסיסית

```typescript
import { applyGenderToText } from '@/lib/hebrew-gender';

const text = "מיופה_הכוח רשאי לפעול";
console.log(applyGenderToText(text, 'male'));   // "מיופה הכוח רשאי לפעול"
console.log(applyGenderToText(text, 'female')); // "מיופת הכוח רשאית לפעול"
```

### 2. בדיקה בממשק

1. פתחי דף הנחיות מקדימות
2. הוסיפי מיופה כוח
3. **בחרי מגדר**: זכר או נקבה
4. פתחי את המחסן
5. בחרי סעיף (לדוגמה: "מכירת נכס - מותרת")
6. **בדקי** שהטקסט מתאים למגדר שבחרת:
   - זכר: "מיופה הכוח רשאי למכור..."
   - נקבה: "מיופת הכוח רשאית למכור..."

---

## טיפים למפתחים

### 1. שמירת עקביות
תמיד השתמש באותה מוסכמה:
- `מיופה_הכוח` - עם קו תחתון למילים דו-מילוניות
- `רשאי`, `אחראי` - מילה בודדת

### 2. בדיקת המילון
כדי לראות את כל המילים הזמינות:

```typescript
import { getAvailableWords } from '@/lib/hebrew-gender';
console.log(getAvailableWords());
```

### 3. בדיקה אם מילה במילון

```typescript
import { isWordInDictionary } from '@/lib/hebrew-gender';
console.log(isWordInDictionary('רשאי')); // true
console.log(isWordInDictionary('משהו')); // false
```

---

## שאלות נפוצות

### ש: מה קורה אם מילה לא נמצאת במילון?
**ת:** המילה נשארת כמו שהיא. המערכת לא תשנה מילה שלא במילון.

### ש: איך להוסיף מילה חדשה?
**ת:** 
```typescript
import { addCustomWord } from '@/lib/hebrew-gender';
addCustomWord('מנהל_עסק', {
  male: 'מנהל עסק',
  female: 'מנהלת עסק',
  plural: 'מנהלי עסק'
});
```

### ש: האם צריך לעדכן את כל המחסנים?
**ת:** כן, אבל זה פשוט. רק שנה את הכתיבה:
- **לפני:** `מיופה הכוח רשאי`
- **אחרי:** `מיופה_הכוח רשאי`

### ש: מה קורה בייצוא ל-Word?
**ת:** הטקסט שכבר עבר מגדור נשאר ממוגדר. המערכת לא מחילה מגדור פעמיים.

---

## סיכום

המערכת הופכת טקסטים משפטיים למגודרים בצורה מקצועית ואוטומטית:

✅ **קל לשימוש** - רק בחירת מגדר בטופס  
✅ **אוטומטי** - הטקסטים מתעדכנים אוטומטית  
✅ **מקצועי** - נטיות נכונות בעברית משפטית  
✅ **גמיש** - ניתן להוסיף מילים חדשות  
✅ **אמין** - אם מילה לא במילון, היא נשארת כמו שהיא  

---

## קבצים רלוונטיים

1. **המילון:** `lib/hebrew-gender.ts`
2. **מחסן הנחיות מקדימות:** `lib/sections-warehouses/advance-directives-warehouse.ts`
3. **רכיב המחסן:** `components/AdvanceDirectivesWarehouse.tsx`
4. **רכיב המסמך:** `components/AdvanceDirectivesDocument.tsx`

---

**נוצר:** 12.10.2025  
**עודכן לאחרונה:** 12.10.2025

