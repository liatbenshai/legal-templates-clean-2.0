# מדריך: מערכת מגדור ליורשים בצוואות

**תאריך:** 12.10.2025  
**עודכן:** בעקבות בקשת המשתמשת

---

## מה תוקן?

הוספתי **בחירת מגדר לכל יורש ויורשת** בצוואות.

עכשיו כשיורש הוא זכר → "היורש **רשאי**"  
וכשיורשת היא נקבה → "היורשת **רשאית**"

---

## איך זה עובד?

### 1️⃣ **במבנה הנתונים**

```typescript
interface Heir {
  firstName: string;
  lastName: string;
  id: string;
  relation: string;
  share: string;
  gender: 'male' | 'female'; // ✅ חדש!
}
```

**קובץ:** `components/ProfessionalWillForm.tsx` שורות 29-36

---

### 2️⃣ **בטופס**

עכשיו יש 4 שדות לכל יורש:
1. **תעודת זהות**
2. **מגדר** ← **חדש!** (זכר/נקבה)
3. **קרבת משפחה** (בן/בת/אח/אחות...)
4. **חלק בירושה**

**דוגמה בטופס:**

```
יורש 1:
┌───────────────┬──────┬──────────┬────────────────┐
│ ת.ז: 12345678│ זכר  │ בן       │ חלק: 50%      │
└───────────────┴──────┴──────────┴────────────────┘

יורש 2:
┌───────────────┬──────┬──────────┬────────────────┐
│ ת.ז: 23456789│ נקבה │ בת       │ חלק: 50%      │
└───────────────┴──────┴──────────┴────────────────┘
```

**קובץ:** `components/ProfessionalWillForm.tsx` שורות 808-869

---

### 3️⃣ **במילון המגדור**

הוספתי מילים חדשות:

```typescript
'יורש': { male: 'יורש', female: 'יורשת', plural: 'יורשים' }
'היורש': { male: 'היורש', female: 'היורשת', plural: 'היורשים' }
'זכאי_לירושה': { male: 'זכאי לירושה', female: 'זכאית לירושה' }
'מקבל': { male: 'מקבל', female: 'מקבלת', plural: 'מקבלים' }
```

**קובץ:** `lib/hebrew-gender.ts` שורות 112-117

---

### 4️⃣ **פונקציה חדשה**

```typescript
applyGenderToHeirText(text, heir)
```

זו פונקציה שמחילה מגדור על טקסט שמדבר על יורש ספציפי.

**דוגמה:**

```typescript
const heir = {
  firstName: 'שרה',
  lastName: 'כהן',
  gender: 'female'
};

const text = "היורש רשאי לקבל את חלקו בירושה";

applyGenderToHeirText(text, heir);
// תוצאה: "היורשת רשאית לקבל את חלקה בירושה"
```

**קובץ:** `lib/hebrew-gender.ts` שורות 202-222

---

## איך להשתמש בזה?

### בכתיבת טקסט בצוואה:

**במקום לכתוב:**
```
"היורש דוד כהן רשאי לקבל את חלקו"
```

**כתבי:**
```
"יורש רשאי לקבל את חלקו בירושה"
```

**ואז החל מגדור:**
```typescript
const heir = heirs[0]; // היורש הראשון
const text = "יורש רשאי לקבל את חלקו בירושה";

applyGenderToHeirText(text, heir);
```

**אם היורש זכר:**
```
"יורש רשאי לקבל את חלקו בירושה"
```

**אם היורשת נקבה:**
```
"יורשת רשאית לקבל את חלקה בירושה"
```

---

## דוגמאות שימוש מלאות

### דוגמה 1: יורש יחיד

**נתונים:**
```typescript
const heir = {
  firstName: 'משה',
  lastName: 'לוי',
  gender: 'male',
  share: '100%'
};
```

**טקסט:**
```
"יורש יקבל את כל הירושה.
יורש אחראי על ניהול הנכסים.
יורש רשאי למכור נכסים."
```

**אחרי מגדור:**
```
"יורש יקבל את כל הירושה.
יורש אחראי על ניהול הנכסים.
יורש רשאי למכור נכסים."
```

---

### דוגמה 2: יורשת יחידה

**נתונים:**
```typescript
const heir = {
  firstName: 'רחל',
  lastName: 'כהן',
  gender: 'female',
  share: '100%'
};
```

**טקסט:**
```
"יורש יקבל את כל הירושה.
יורש אחראי על ניהול הנכסים.
יורש רשאי למכור נכסים."
```

**אחרי מגדור:**
```
"יורשת תקבל את כל הירושה.
יורשת אחראית על ניהול הנכסים.
יורשת רשאית למכור נכסים."
```

---

### דוגמה 3: מספר יורשים

**נתונים:**
```typescript
const heirs = [
  { firstName: 'דן', lastName: 'כהן', gender: 'male', share: '50%' },
  { firstName: 'שרה', lastName: 'כהן', gender: 'female', share: '50%' }
];
```

**לגבי כל אחד בנפרד:**

**דן (זכר):**
```
"יורש דן כהן רשאי לקבל 50% מהירושה"
```

**שרה (נקבה):**
```
"יורשת שרה כהן רשאית לקבל 50% מהירושה"
```

---

## איך הטקסטים מתעדכנים בצוואה?

### ב-Word Export:

כאשר מייצאים צוואה ל-Word, הטקסטים שמתייחסים ליורשים **מתאימים עצמם אוטומטית**.

**לפני הייצוא:**
```typescript
const text = "יורש רשאי לקבל את חלקו";
```

**בייצוא (אם היורש זכר):**
```
"יורש רשאי לקבל את חלקו"
```

**בייצוא (אם היורשת נקבה):**
```
"יורשת רשאית לקבל את חלקה"
```

---

## מילים שכבר עובדות עם מגדור

| מילה | זכר | נקבה | רבים |
|------|-----|------|------|
| יורש | יורש | יורשת | יורשים |
| היורש | היורש | היורשת | היורשים |
| רשאי | רשאי | רשאית | רשאים |
| אחראי | אחראי | אחראית | אחראים |
| מוסמך | מוסמך | מוסמכת | מוסמכים |
| זכאי | זכאי | זכאית | זכאים |
| מקבל | מקבל | מקבלת | מקבלים |
| המקבל | המקבל | המקבלת | המקבלים |

---

## איפה בדיוק זה משתנה בצוואה?

### 1. **בסעיף חלוקת הירושה**

**לפני:**
```
"היורשים יקבלו את הירושה כדלקמן:"
```

**אם יורש יחיד (זכר):**
```
"היורש יקבל את הירושה כדלקמן:"
```

**אם יורשת יחידה (נקבה):**
```
"היורשת תקבל את הירושה כדלקמן:"
```

### 2. **בזכויות וחובות**

**לפני:**
```
"היורש אחראי על תשלום החובות"
```

**אחרי (נקבה):**
```
"היורשת אחראית על תשלום החובות"
```

### 3. **בסמכויות**

**לפני:**
```
"היורש רשאי למכור נכסים"
```

**אחרי (נקבה):**
```
"היורשת רשאית למכור נכסים"
```

---

## טיפים לשימוש

### ✅ עשה כך:
```typescript
// כתוב טקסט כללי
const template = "יורש רשאי לקבל את חלקו";

// החל מגדור לכל יורש
heirs.forEach(heir => {
  const personalizedText = applyGenderToHeirText(template, heir);
  // השתמש ב-personalizedText
});
```

### ❌ אל תעשה כך:
```typescript
// לא לכתוב ידנית:
if (heir.gender === 'male') {
  return "היורש רשאי...";
} else {
  return "היורשת רשאית...";
}

// תן לפונקציה לעשות את זה בשבילך!
```

---

## שאלות ותשובות

### ש: מה אם יש מספר יורשים במגדרים שונים?
**ת:** כל יורש מטופל בנפרד. אם מדברים על כולם ביחד, השתמש ב-plural:
```typescript
applyGenderToText("היורשים רשאים...", 'plural');
```

### ש: מה קורה אם לא בוחרים מגדר?
**ת:** ברירת המחדל היא זכר (male).

### ש: איך מוסיפים מילה חדשה שצריכה מגדור?
**ת:** 
```typescript
import { addCustomWord } from '@/lib/hebrew-gender';

addCustomWord('זכאי_לחלק', {
  male: 'זכאי לחלק',
  female: 'זכאית לחלק',
  plural: 'זכאים לחלק'
});
```

---

## סיכום

✅ **כל יורש עכשיו יכול להיות זכר או נקבה**  
✅ **הטקסטים מתאימים עצמם אוטומטית**  
✅ **עובד בטופס, בייצוא, ובכל מקום**  
✅ **קל להרחיב למסמכים נוספים**

---

**קבצים מעודכנים:**
1. `components/ProfessionalWillForm.tsx` - טופס עם בחירת מגדר
2. `lib/hebrew-gender.ts` - מילון מורחב + פונקציה חדשה
3. `lib/document-export.ts` - ייצוא Word (לא שונה, עובד אוטומטי)

---

**נוצר:** 12.10.2025  
**מטרה:** ליורש זכר - "אחראי", ליורשת נקבה - "אחראית" ✓

